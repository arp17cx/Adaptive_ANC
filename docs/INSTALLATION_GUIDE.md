# Windows å®‰è£…æŒ‡å—

## ğŸ“¦ ç¬¬ä¸€æ¬¡ä½¿ç”¨ - å®Œæ•´æ­¥éª¤

### æ­¥éª¤1: å®‰è£…GCCç¼–è¯‘å™¨

#### æ¨èæ–¹æ¡ˆ: TDM-GCC (æœ€ç®€å•)

1. **ä¸‹è½½TDM-GCC**
   - è®¿é—®: https://jmeubank.github.io/tdm-gcc/
   - ä¸‹è½½æœ€æ–°ç‰ˆ (ä¾‹å¦‚: tdm64-gcc-10.3.0-2.exe)

2. **å®‰è£…**
   - è¿è¡Œä¸‹è½½çš„å®‰è£…ç¨‹åº
   - é€‰æ‹© "Create" (æ–°å®‰è£…)
   - **é‡è¦**: å‹¾é€‰ "Add to PATH" é€‰é¡¹
   - ç‚¹å‡» "Install"
   - ç­‰å¾…å®‰è£…å®Œæˆ

3. **éªŒè¯å®‰è£…**
   - æŒ‰ Win+Rï¼Œè¾“å…¥ `cmd`ï¼Œå›è½¦
   - åœ¨å‘½ä»¤è¡Œè¾“å…¥: `gcc --version`
   - å¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ gcc 10.3.0ï¼‰ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ
   - å¦‚æœæç¤º"ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"ï¼Œéœ€è¦é‡å¯ç”µè„‘

### æ­¥éª¤2: è§£å‹ç¨‹åºæ–‡ä»¶

1. å°†æ‰€æœ‰æ–‡ä»¶è§£å‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚:
   ```
   C:\ANC_System\
   ```

2. ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶éƒ½åœ¨åŒä¸€ç›®å½•:
   ```
   âœ“ run.bat
   âœ“ build.bat
   âœ“ clean.bat
   âœ“ main.c
   âœ“ config.h
   âœ“ coeffs.h
   âœ“ wav_io.c å’Œ wav_io.h
   âœ“ fir_filter.c å’Œ fir_filter.h
   âœ“ time_domain_sim.c å’Œ time_domain_sim.h
   âœ“ logger.c å’Œ logger.h
   âœ“ README_WINDOWS.md
   ```

### æ­¥éª¤3: è¿è¡Œç¨‹åº

1. **ç¬¬ä¸€æ¬¡è¿è¡Œ**
   - åŒå‡» `run.bat`
   - ç¨‹åºä¼šè‡ªåŠ¨:
     - æ£€æµ‹gcc
     - ç¼–è¯‘æ‰€æœ‰æºä»£ç 
     - è¿è¡Œç¨‹åº
   - ç­‰å¾…å®Œæˆï¼ˆçº¦10-30ç§’ï¼‰

2. **æŸ¥çœ‹è¾“å‡º**
   - `anc_log.txt` - å®Œæ•´æ—¥å¿—
   - `output_comparison.wav` - éŸ³é¢‘å¯¹æ¯”æ–‡ä»¶

3. **åç»­è¿è¡Œ**
   - ç›´æ¥åŒå‡» `run.bat` å³å¯
   - æˆ–åŒå‡» `anc_system.exe`

## ğŸ¯ å¿«é€Ÿæµ‹è¯•

è¿è¡Œååº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡º:
```
============================================
  Adaptive ANC System with Time Domain Sim
============================================

Configuration:
  DSP Sample Rate: 32000 Hz
  Realtime Sample Rate: 375000 Hz
  FFT Length: 2048
  Process Interval: 5 ms

WAV file not found: input_4ch.wav
Using generated signal instead
Generated 3750000 samples at 375000 Hz

...

Adaptation Loop Completed
Total iterations: 100

Output files:
  - anc_log.txt (log file)
  - output_comparison.wav (2-channel comparison)
```

## ğŸ”§ å¯é€‰: ä½¿ç”¨çœŸå®å½•éŸ³

å¦‚æœä½ æœ‰çœŸå®å½•éŸ³æ•°æ®:

1. **å‡†å¤‡WAVæ–‡ä»¶**
   - å‘½åä¸º: `input_4ch.wav`
   - è‡³å°‘2ä¸ªé€šé“
   - é€šé“0 = å‚è€ƒéº¦(FF)
   - é€šé“1 = è¯¯å·®éº¦(FB)

2. **å‡†å¤‡æ¬¡çº§è·¯å¾„ (å¯é€‰)**
   - å‘½åä¸º: `secondary_path.bin`
   - äºŒè¿›åˆ¶æ–‡ä»¶, 4096ä¸ªfloat32

3. **æ”¾ç½®æ–‡ä»¶**
   - å°†æ–‡ä»¶æ”¾åœ¨ç¨‹åºç›®å½• (ä¸run.batåŒä¸€ç›®å½•)

4. **è¿è¡Œ**
   - åŒå‡» `run.bat`
   - ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨è¿™äº›æ–‡ä»¶

## ğŸ› é—®é¢˜æ’æŸ¥

### é—®é¢˜1: "gccä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤"

**åŸå› **: gccæœªå®‰è£…æˆ–æœªæ·»åŠ åˆ°PATH

**è§£å†³æ–¹æ¡ˆ**:
1. é‡æ–°å®‰è£…TDM-GCCï¼Œç¡®ä¿å‹¾é€‰"Add to PATH"
2. æˆ–æ‰‹åŠ¨æ·»åŠ åˆ°PATH:
   - å³é”®"æ­¤ç”µè„‘" â†’ å±æ€§ â†’ é«˜çº§ç³»ç»Ÿè®¾ç½®
   - ç¯å¢ƒå˜é‡ â†’ ç³»ç»Ÿå˜é‡ â†’ Path â†’ ç¼–è¾‘
   - æ·»åŠ gccå®‰è£…ç›®å½• (ä¾‹å¦‚: `C:\TDM-GCC-64\bin`)
3. é‡å¯ç”µè„‘

### é—®é¢˜2: ç¼–è¯‘é”™è¯¯ "No such file or directory"

**åŸå› **: æºæ–‡ä»¶ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆ**:
ç¡®ä¿æ‰€æœ‰.cå’Œ.hæ–‡ä»¶éƒ½åœ¨åŒä¸€ç›®å½•

### é—®é¢˜3: è¿è¡Œæ—¶å´©æºƒ

**åŸå› **: å¯èƒ½æ˜¯å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
ç¼–è¾‘ `main.c`ï¼Œå‡å°‘ç”Ÿæˆä¿¡å·çš„é•¿åº¦:
```c
// ç¬¬87è¡Œå·¦å³
total_samples = sample_rate_actual * 5;  // æ”¹ä¸º5ç§’
```

### é—®é¢˜4: è¾“å‡ºæ–‡ä»¶æ²¡æœ‰ç”Ÿæˆ

**åŸå› **: ç¨‹åºå¼‚å¸¸é€€å‡º

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹ `anc_log.txt` (å¦‚æœå­˜åœ¨)
2. åœ¨å‘½ä»¤è¡Œè¿è¡ŒæŸ¥çœ‹é”™è¯¯:
   ```cmd
   cd C:\ANC_System
   anc_system.exe
   ```

## ğŸ“ ç›®å½•ç»“æ„ç¤ºä¾‹

æ­£ç¡®çš„ç›®å½•ç»“æ„:
```
C:\ANC_System\
â”œâ”€â”€ run.bat                    â† åŒå‡»è¿™ä¸ªè¿è¡Œ
â”œâ”€â”€ build.bat
â”œâ”€â”€ clean.bat
â”œâ”€â”€ main.c
â”œâ”€â”€ config.h
â”œâ”€â”€ coeffs.h
â”œâ”€â”€ wav_io.c
â”œâ”€â”€ wav_io.h
â”œâ”€â”€ fir_filter.c
â”œâ”€â”€ fir_filter.h
â”œâ”€â”€ time_domain_sim.c
â”œâ”€â”€ time_domain_sim.h
â”œâ”€â”€ logger.c
â”œâ”€â”€ logger.h
â”œâ”€â”€ README_WINDOWS.md
â”œâ”€â”€ INSTALLATION_GUIDE.md     â† æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ [å¯é€‰è¾“å…¥]
â”œâ”€â”€ input_4ch.wav             (å¯é€‰)
â”œâ”€â”€ secondary_path.bin        (å¯é€‰)
â”‚
â””â”€â”€ [è¿è¡Œåç”Ÿæˆ]
    â”œâ”€â”€ anc_system.exe
    â”œâ”€â”€ *.o (ä¸­é—´æ–‡ä»¶)
    â”œâ”€â”€ anc_log.txt
    â””â”€â”€ output_comparison.wav
```

## âœ… æˆåŠŸæ ‡å¿—

ç¨‹åºè¿è¡ŒæˆåŠŸåä½ åº”è¯¥çœ‹åˆ°:
1. å‘½ä»¤è¡Œçª—å£æ˜¾ç¤ºè¿›åº¦
2. ç”Ÿæˆ `anc_log.txt` æ–‡ä»¶
3. ç”Ÿæˆ `output_comparison.wav` æ–‡ä»¶
4. çª—å£æœ€åæ˜¾ç¤º "Execution Completed"

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å¯ä»¥:
1. åŒå‡» `run.bat` è¿è¡Œç¨‹åº
2. æŸ¥çœ‹ `anc_log.txt` äº†è§£è¯¦ç»†è¿‡ç¨‹
3. ä½¿ç”¨éŸ³é¢‘æ’­æ”¾å™¨æ‰“å¼€ `output_comparison.wav` å¯¹æ¯”é™å™ªæ•ˆæœ

ç¥ä½¿ç”¨æ„‰å¿«ï¼
